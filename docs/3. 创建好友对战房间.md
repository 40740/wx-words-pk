# 创建好友对战房间

## 邀请好友对战

```js
/**
 * 好友对战或随机匹配没有房间的时候，创建单词PK房间
 * 1. 获取对局单词数目
 * 2. 生成随机单词
 * 3. 格式化随机单词，生成单词列表
 * 4. 创建房间
 */
async createCombatRoom(isFriend = true) {
  try {
    $.loading('生成随机词汇中...')
    const { data: { userInfo: { bookId, bookDesc, bookName } } } = this
    const number = getCombatSubjectNumber() // 获取要进行多少个单词对战，本地缓存的设置
    const { list: randomList } = await wordModel.getRandomWords(bookId, number * SUBJECT_HAS_OPTIONS_NUMBER) // 获取指定数量的随机单词
    const wordList = formatList(randomList, SUBJECT_HAS_OPTIONS_NUMBER) // 格式化随机单词，生成单词列表
    $.loading('创建房间中...')
    const roomId = await roomModel.create(wordList, isFriend, bookDesc, bookName) // 创建房间，通过roomId跳转到对战页
    $.hideLoading()
    router.push('combat', { roomId })
  } catch (error) {
    $.hideLoading()
    this.selectComponent('#createRoomFail').show()
  }
},
/**
 * 邀请好友对战
 */
onChallengeFriend() {
  this.createCombatRoom(true)
},
```
